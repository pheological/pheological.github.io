<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>ViaProxy Guide</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
        <style>
            html {
                scroll-behavior: smooth;
            }
            body {
                background-color: #000;
                color: #fff;
                font-family: 'Inter', sans-serif;
                line-height: 1.6;
                margin: 0;
                padding: 0;
                overflow-y: scroll;
            }
            .sidebar {
                position: fixed;
                left: 0;
                top: 0;
                width: 220px;
                height: 100%;
                background: transparent;
                padding: 2rem;
                overflow-y: auto;
            }
            .sidebar h3 {
                margin-top: 0;
            }
            .sidebar-title {
                font-size: 1.5rem;
                font-weight: 700;
                background: linear-gradient(90deg, #3b82f6, #1e3a8a, #3b82f6);
                background-size: 200% auto;
                background-clip: text;
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                animation: textGradient 4s linear infinite;
                margin-bottom: 1rem;
            }
            .sidebar ul {
                list-style: none;
                padding: 0;
                margin: 0;
            }
            .sidebar ul li a {
                color: #ccc;
                text-decoration: none;
                display: block;
                padding: 0.5rem 0;
                transition: color 0.2s ease-in-out;
            }
            .sidebar ul li a:hover, .sidebar ul li a.active {
                color: #fff;
            }
            .sidebar ul ul {
                padding-left: 1rem;
                font-size: 0.9em;
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.2s ease-out;
            }
            .sidebar ul .has-submenu.open > ul {
                 max-height: 200px; /* Adjust as needed */
            }
            .sidebar .submenu-toggle {
                cursor: pointer;
                position: relative;
            }
            .sidebar .submenu-toggle::after {
                content: '\25BC'; /* Down arrow */
                font-size: 0.6em;
                color: #ccc;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                transition: transform 0.2s ease-out;
            }
            .sidebar .has-submenu.open > .submenu-toggle::after {
                transform: translateY(-50%) rotate(180deg); /* Up arrow */
            }
            .main-content {
                margin-left: 260px; /* sidebar width + padding */
                padding: 2rem;
            }
            .collapsible-header {
                background-color: #1e1e1e;
                color: white;
                cursor: pointer;
                padding: 18px;
                width: 100%;
                border: 1px solid #333;
                text-align: left;
                outline: none;
                font-size: 1.1rem;
                border-radius: 8px;
                margin-top: 1rem;
                font-family: 'Inter', sans-serif;
                font-weight: 500;
                transition: background-color 0.2s ease-in-out, border-radius 0.2s ease-in-out;
                position: relative;
            }
            .collapsible-header:after {
                content: '\25BC'; /* Down arrow */
                font-size: 0.8em;
                color: #ccc;
                position: absolute;
                right: 18px;
                top: 50%;
                transform: translateY(-50%);
                transition: transform 0.2s ease-out;
            }
            .collapsible-header.active:after {
                transform: translateY(-50%) rotate(180deg); /* Up arrow */
            }
            .collapsible-header:hover {
                background-color: #2a2a2a;
            }
            .collapsible-header.active {
                border-bottom-left-radius: 0;
                border-bottom-right-radius: 0;
            }
            .collapsible-content {
                padding: 0 18px;
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.3s ease-out;
                background-color: #1a1a1a;
                border-bottom-left-radius: 8px;
                border-bottom-right-radius: 8px;
                border-top: none;
            }
            .collapsible-content-inner {
                padding: 18px 0;
            }
            .background-container {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                z-index: -1;
                overflow: hidden;
            }

            .grid-container {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-image:
                    linear-gradient(to right, rgba(255, 255, 255, 0.05) 1px, transparent 1px),
                    linear-gradient(to bottom, rgba(255, 255, 255, 0.05) 1px, transparent 1px);
                background-size: 50px 50px;
                animation: grid-pan 80s linear infinite;
            }

            @keyframes grid-pan {
                from { background-position: 0 0; }
                to { background-position: 800px 800px; }
            }

            @keyframes textGradient {
                0% { background-position: 0% center; }
                100% { background-position: 200% center; }
            }

            .container {
                max-width: 800px;
                margin: 0 auto;
                padding: 2rem;
            }
            h1, h2, h3, h4 {
                margin-bottom: 1rem;
            }
            p {
                margin-bottom: 1rem;
            }
            img {
                max-width: 100%;
                height: auto;
                border-radius: 8px;
                margin: 1rem 0;
            }
            code {
                background: #1e1e1e;
                padding: 0.2em 0.4em;
                border-radius: 4px;
                font-family: 'Courier New', Courier, monospace;
            }
            pre {
                background: #1e1e1e;
                padding: 1rem;
                border-radius: 8px;
                overflow-x: auto;
            }
            .spotlight {
                position: fixed;
                top: 0;
                left: 0;
                width: 400px;
                height: 400px;
                background: radial-gradient(circle, rgba(139, 92, 246, 0.3) 0%, transparent 70%);
                border-radius: 50%;
                filter: blur(50px);
                pointer-events: none;
                transition: transform 500ms ease-out;
                z-index: -1;
            }


            .spotlight.s2 {
                width: 300px;
                height: 300px;
                background: radial-gradient(circle, rgba(59, 130, 246, 0.3) 0%, transparent 70%);
            }
        </style>
    </head>
    <body>
        <div class="spotlight"></div>
        <div class="spotlight s2"></div>
        <nav class="sidebar">
            <h3 class="sidebar-title">Table of Contents</h3>
            <ul>
                <li><a href="#why">Why?</a></li>
                <li><a href="#installation">Installation</a></li>
                <li class="has-submenu">
                    <a href="#configuration" class="submenu-toggle">Configuration</a>
                    <ul>
                        <li><a href="#accounts">1. Accounts</a></li>
                        <li><a href="#general">2. General</a></li>
                        <li><a href="#advanced">3. Advanced</a></li>
                    </ul>
                </li>
                <li><a href="#usage">Usage</a></li>
                <li><a href="#issues">Issues & Notes</a></li>
            </ul>
        </nav>
        <div class="main-content">
            <div class="background-container">
                <div class="grid-container"></div>
            </div>
            <div class="container">
                <h1>ViaProxy Tutorial</h1>
                <p>This is a guide on how to set up and use ViaProxy on the minecraft server Hoplite.</p>

                <h2 id="why">Why?</h2>
                <p>Hoplite has recently updated to the minecraft version 1.21.8, which has caused a lot of issues for users.
                    Many mods and resource packs have not been able to update to 1.21.8, forcing users to play without them, leading to a worse experience on the server.
                    To combat this issue, I've made a guide for players to be able to play on hoplite without needing to update. </p>

                <button class="collapsible-header" id="installation">Installation</button>
                <div class="collapsible-content">
                    <div class="collapsible-content-inner">
                        <p>First, you need to download ViaProxy from the official releases page on GitHub. You can find it at <a href="https://github.com/ViaVersion/ViaProxy/releases" target="_blank">https://github.com/ViaVersion/ViaProxy/releases</a>.</p>
                        <p>Download the latest "ViaProxy.jar" file. It should look like this:</p>
                        <img src="assets/download.png" alt="ViaProxy Download">
                        <p><b>NOTE: DO NOT download the java8 version unless you know what you're doing.</b></p>
                        <p>Once downloaded, simply double-click the `ViaProxy.jar` file to run it. You may get a warning from your antivirus software, but you can safely ignore it as the software is fully open-source and trusted.</p>
                        <p>After opening it, you should see a window like this:</p>
                        <img src="assets/installed.png" alt="ViaProxy Running">
                        <p>If you've managed to do this, you've successfully installed ViaProxy. You now need to configure it properly.</p>
                    </div>
                </div>

                <button class="collapsible-header" id="configuration">Configuration</button>
                <div class="collapsible-content">
                    <div class="collapsible-content-inner">
                        <button class="collapsible-header" id="accounts">1. Accounts</button>
                        <div class="collapsible-content">
                            <div class="collapsible-content-inner">
                                <p>Firstly, go to the Accounts tab. It should look like the picture below. Then, click on the "Microsoft Account" button.</p>
                                <img src="assets/accountcfg.png" alt="ViaProxy Accounts Tab">
                                <p>Ignore the accounts shown in the screenshot; They are accounts I've already added.</p>
                                <br>
                                <p>After you click on it, you should see this pop up.</p>
                                <img src="assets/microsoft.png" alt="Microsoft Login">
                                <p>It will redirect you to microsoft's official page. from there, login to your microsoft account.</p>
                                <br>
                                <p>Once you've done that, your account should show up. If you want to add multiple accounts,
                                you can do so. However, make sure to right-click the one you want to join the server with.
                                It should look something like this: </p>
                                <img src="assets/accountlist.png" alt="Account List">
                            </div>
                        </div>

                        <button class="collapsible-header" id="general">2. General</button>
                        <div class="collapsible-content">
                            <div class="collapsible-content-inner">
                                <p>Once you're done with accounts, switch over to the general tab. Enter the Server Address <code>hoplite.gg</code>
                                into the server address. Then, select the server version <code>1.21.7-1.21.8</code>. Finally, choose the option
                                <code>Use selected account</code> under minecraft account. It should look something like this: </p>
                                <img src="assets/general.png" alt="General Settings">
                            </div>
                        </div>

                        <button class="collapsible-header" id="advanced">3. Advanced</button>
                        <div class="collapsible-content">
                            <div class="collapsible-content-inner">
                                <p>Lastly, go to the advanced section. make sure to turn on the <code>Chat signing</code> option
                                as well as the <code>Simple Voice Chat Support</code> option. Once you're done, it should
                                look something like this: </p>
                                <img src="assets/advanced.png" alt="Advanced Settings">
                                <p>If you managed to do all of this, congratulations! You have finished configuring ViaProxy.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <button class="collapsible-header" id="usage">Usage</button>
                <div class="collapsible-content">
                    <div class="collapsible-content-inner">
                        <p>Once configured, you can start it by pressing the start button shown below. It should look like this: </p>
                        <img src="assets/start.png" alt="Start ViaProxy">
                        <p>Next, launch your preferred minecraft client, go to the multiplayer menu and click on the
                            <code>Direct Connect</code> button. Then, enter the IP <code>127.0.0.1:25568</code>.
                            You can now connect to hoplite while being on an older version of minecraft. This is how it should look like:</p>
                        <img src="assets/directconnect.png" alt="Direct Connect">
                    </div>
                </div>

                <button class="collapsible-header" id="issues">Issues and things to know</button>
                <div class="collapsible-content">
                    <div class="collapsible-content-inner">
                        <p>1. From my testing, the only downside to doing this is the fact that you are not able to use the
                        ghastly whistle legendary. This is due to the way mountable mobs work in the newest version.</p>
                        <p>2. Although I have not run into any anticheat issues, they may arise.
                        This is a use at your own risk application. Although hoplite has not specifically disallowed it
                        it may flag the anticheat, however in my testing it hasn't so far.</p>
                        <p>3. Although I made this guide for hoplite specifically,
                            this can be done for most other servers. Just change the IP to the server ip you want.</p>
                    </div>
                </div>
            </div>
        </div>
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                const collapsibles = document.querySelectorAll(".collapsible-header");

                function adjustParentMaxHeight(element, heightChange) {
                    let parentContent = element.parentElement.closest('.collapsible-content');
                    if (parentContent && parentContent.style.maxHeight) {
                        const currentMaxHeight = parseFloat(parentContent.style.maxHeight);
                        const newMaxHeight = currentMaxHeight + heightChange;
                        parentContent.style.maxHeight = newMaxHeight + "px";
                        if (parentContent.parentElement.closest('.collapsible-content')) {
                            adjustParentMaxHeight(parentContent, heightChange);
                        }
                    }
                }

                function openCollapsible(header) {
                    if (!header.classList.contains('active')) {
                        header.classList.add('active');
                        const content = header.nextElementSibling;
                        const heightToAdd = content.scrollHeight;
                        content.style.maxHeight = heightToAdd + "px";
                        adjustParentMaxHeight(content, heightToAdd);
                    }
                }

                collapsibles.forEach(collapsible => {
                    collapsible.addEventListener("click", function() {
                        this.classList.toggle("active");
                        const content = this.nextElementSibling;

                        if (content.style.maxHeight) {
                            const heightToSubtract = content.scrollHeight;
                            content.style.maxHeight = null;
                            adjustParentMaxHeight(content, -heightToSubtract);
                        } else {
                            const heightToAdd = content.scrollHeight;
                            content.style.maxHeight = heightToAdd + "px";
                            adjustParentMaxHeight(content, heightToAdd);
                        }
                    });
                });

                const sidebarLinks = document.querySelectorAll('.sidebar a[href^="#"]');
                sidebarLinks.forEach(link => {
                    link.addEventListener('click', function(e) {
                        const href = this.getAttribute('href');
                        if (href.length > 1 && document.querySelector(href)) {
                            e.preventDefault();
                            const targetElement = document.querySelector(href);

                            if (targetElement) {
                                // Expand parent collapsibles if the target is inside one
                                let parentCollapsible = targetElement.closest('.collapsible-content');
                                if (parentCollapsible) {
                                    let header = parentCollapsible.previousElementSibling;
                                    if(header && header.classList.contains('collapsible-header')) {
                                        openCollapsible(header);
                                    }
                                }

                                // If the target itself is a collapsible, expand it
                                if (targetElement.classList.contains('collapsible-header')) {
                                    openCollapsible(targetElement);
                                }

                                setTimeout(() => {
                                    targetElement.scrollIntoView({
                                        behavior: 'smooth',
                                        block: 'start'
                                    });
                                }, 200); // Delay to allow expand animation
                            }
                        }
                    });
                });

                const submenuToggles = document.querySelectorAll('.submenu-toggle');
                submenuToggles.forEach(toggle => {
                    toggle.addEventListener('click', function(e) {
                        e.preventDefault();
                        this.parentElement.classList.toggle('open');
                    });
                });

                const spotlight = document.querySelector('.spotlight');
                const spotlight2 = document.querySelector('.spotlight.s2');
                let timeout;

                document.addEventListener('mousemove', (e) => {
                    if (timeout) {
                        window.cancelAnimationFrame(timeout);
                    }
                    timeout = window.requestAnimationFrame(() => {
                        const x = e.clientX;
                        const y = e.clientY;

                        spotlight.style.transform = `translate(${x - spotlight.offsetWidth / 2}px, ${y - spotlight.offsetHeight / 2}px)`;
                        spotlight2.style.transform = `translate(${x - spotlight2.offsetWidth / 2}px, ${y - spotlight2.offsetHeight / 2}px)`;
                    });
                });
            });
        </script>
    </body>
</html>
